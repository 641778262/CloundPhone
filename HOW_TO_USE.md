# 投屏(Scrcpy_android)使用说明

## 准备

1. 被控端打开无线ADB调试，端口为5555<br>
	 有root的用户可以在终端下输入以下命令，之后手机将开机自动启动ADB无线调试：<br>
	 ``` shell
	 echo "sleep 5 && setprop service.adb.tcp.port 5555 && stop adbd && start adbd" > /data/adb/service.d/adb.sh & chmod +x /data/adb/service.d/adb.sh
	 ```
	 <br>
	 无root的用户，可在有线连接ADB后，在电脑端输入以下命令：<br>
	 ``` shell
	 adb tcpip 5555
	 ```
2. 被控端安装scrcpy_back(可选)<br>
	 如主备控端分辨率相同，或在添加设备时选择不修改分辨率则可以不在被控端安装scrcpy_back
	 将该软件放至桌面左半部分，将通知栏磁贴放至通知栏左半部分（放在左边是因为避免修改分辨率后显示界面超出屏幕点击不到，放在左边可保证总能在屏幕内显示），点击scrcpy_back或长按磁贴，并允许永久调试，测试软件是否正常工作（软件会自动退出，不是崩溃，可以手动修改分辨率，测试软件是否正常工作）
3. 被控端建议改为使用静态地址(可选)<br>
	 可在手机上配置静态获取，也可以在路由器上配置静态分配

## 软件使用

1. 简单使用<br>
	 主控端安装投屏(Scrcpy_android)，打开软件进行悬浮窗授权，添加设备，点击添加后的设备，被控端同意永久调试，开始投屏。
2. 高级使用<br>
	 在添加设备时设置高级选项，可自定义ADB端口、自定义编解码参数、启用小窗模式、禁止修改被控端分辨率、设置导航球(仅全屏模式生效)等。
3. 全屏模式使用
	 - 设备全屏控制后主控端进入专注模式，如需退出投屏需按主控端电源键熄屏，也可以点按主控端通知栏消息。
	 - 设备全屏控制后使用悬浮导航球导航(可关闭)，单击为返回、双击为桌面、长按为最近任务，悬浮球可拖动。
4. 小窗模式使用
	 - 可通过拖动横条移动小窗。
	 - 双击横条可进入全屏控制(进入全屏后只能断开连接，无法再恢复小窗模式)。
	 - 点击右上角红点可关闭投屏。
	 - 拖动右下角白点可等比更改小窗大小。
5. 小小窗模式使用
	 - 在小窗模式下将小窗拖动至左上角或右上角会变为小小窗。
	 - 点按小小窗任意位置可恢复为小窗模式。
	 - 拖动小小窗任意位置可拖动小小窗。

## 其他说明

1. 默认选项
	 - 默认使用5555端口作为ADB端口
	 - 默认全屏显示，可以在添加设备时修改高级选项使用小窗模式
	 - 默认修改被控端分辨率，可以在添加设备时修改高级选项设置不修改
	 - 默认分辨率为720p，帧率为60帧，码率为8M，编解码器为H264
	 - 默认启用音频放大器，会增加音频延迟，如延迟过高，可尝试关闭音频放大（关闭后需要在被控端和主控端均调大音量）
2. 其他
	 - 分辨率在退出后会自动恢复，如果非正常退出导致被控端未恢复，可使用恢复(Scrcpy_back)
	 - 投屏后声音会自动流转至主控端，音量大小受控于主控端，不需要调整被控端(除非被控端静音)
	 - 长按设备可修改或删除设备
	 - 软件主页面长按“添加设备”按钮可强制停止所有投屏
